#!/bin/bash

set -o errexit

CLUSTER_NAME="chaordicledger"

# CONTAINER_CLI=${CONTAINER_CLI:-docker}
# FABRIC_VERSION=${TEST_NETWORK_FABRIC_VERSION:-2.4.1}
# FABRIC_CA_VERSION=${TEST_NETWORK_FABRIC_CA_VERSION:-1.5.2}
# FABRIC_CONTAINER_REGISTRY=${TEST_NETWORK_FABRIC_CONTAINER_REGISTRY:-hyperledger}
# NETWORK_NAME=${TEST_NETWORK_NAME:-test-network}
# CLUSTER_NAME=${TEST_NETWORK_KIND_CLUSTER_NAME:-kind}
# NS=${TEST_NETWORK_KUBE_NAMESPACE:-${NETWORK_NAME}}
# CHANNEL_NAME=${TEST_NETWORK_CHANNEL_NAME:-mychannel}
# LOG_FILE=${TEST_NETWORK_LOG_FILE:-network.log}
# DEBUG_FILE=${TEST_NETWORK_DEBUG_FILE:-network-debug.log}
# LOCAL_REGISTRY_NAME=${TEST_NETWORK_LOCAL_REGISTRY_NAME:-kind-registry}
# LOCAL_REGISTRY_PORT=${TEST_NETWORK_LOCAL_REGISTRY_PORT:-5000}
# STAGE_DOCKER_IMAGES=${TEST_NETWORK_STAGE_DOCKER_IMAGES:-false}
# NGINX_HTTP_PORT=${TEST_NETWORK_INGRESS_HTTP_PORT:-80}
# NGINX_HTTPS_PORT=${TEST_NETWORK_INGRESS_HTTPS_PORT:-443}
# CHAINCODE_NAME=${TEST_NETWORK_CHAINCODE_NAME:-asset-transfer-basic}
# CHAINCODE_IMAGE=${TEST_NETWORK_CHAINCODE_IMAGE:-ghcr.io/hyperledgendary/fabric-ccaas-asset-transfer-basic:latest}
# CHAINCODE_LABEL=${TEST_NETWORK_CHAINCODE_LABEL:-basic_1.0}

# Used for applying additional CA trusts (e.g. CAs for corporate proxy servers)
ADDITIONAL_CA_TRUST=${TEST_NETWORK_ADDITIONAL_CA_TRUST:-catrust}

. scripts/check_prerequisites.sh
. scripts/cluster.sh

if [ "${MODE}" == "init" ]; then
  log "Initializing cluster \"${CLUSTER_NAME}\":"
  cluster_init
  log "üèÅ - Cluster is ready."
fi

